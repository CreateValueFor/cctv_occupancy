# ğ‘‰ğ‘(ğ‘’0, ğ‘ˆ, ğ‘‰) := 12â¡â£â¢(ğ‘¥ğ‘âˆ’ğ‘¥ğ‘Ÿ)ğ‘‡ğ‘ƒ(ğ‘¥ğ‘âˆ’ğ‘¥ğ‘Ÿ) +âˆ‘ğ‘˜ = 1ğ‘âˆ’1ğ‘’ğ‘‡ğ‘˜ğ‘„ğ‘’ğ‘˜ +âˆ‘ğ‘˜ = 0ğ‘âˆ’1ğ‘¢ğ‘˜ğ‘‡ğ‘…ğ‘¢ğ‘˜â¤â¦â¥,
import numpy as np
import math


# def calculate_pmv(x, T_i, T_o, H_r):
#     """
#     ì¸ì:
#     x : np.array([M, W, Cl, Ta]) - ì¸ê°„ ëŒ€ì‚¬ìœ¨, ì˜·ì˜ ì €í•­ì„±, ì˜·ì˜ ì—´ ì „ë‹¬ ê³„ìˆ˜, ì‹¤ë‚´ì˜¨ë„
#     T_i : float - ì‹¤ë‚´ ì˜¨ë„
#     T_o : float - ì‹¤ì™¸ ì˜¨ë„
#     H_r : float - ìƒëŒ€ ìŠµë„

#     ë°˜í™˜ê°’:
#     float - PMV
#     """
#     M, W, Cl, Ta = x
#     I_cl = 2.38 * 10**(-3) * Cl * (T_i - Ta)
#     W_m = W / 60
#     M_w = M - W_m
#     F_cl = 1.05 + 0.645 * Cl
#     E_R = 0.42 * (M - 58.15)
#     E_D = 3.05 * 10**(-3) * (5733 - 6.99 * (M - 273) - H_r *
#                              (0.1333 + 0.0027 * (M - 273))) * W_m
#     E_L = 0.017 * M * (5867 - H_r * (0.275 - 0.0018 * M) - Ta)
#     PMV = 0.303 * np.exp(-0.036 * M) + 0.028 * (T_i - T_o) + \
#         F_cl * (E_R + E_D + E_L) - 3.05
#     return abs(PMV)

def calculate_pmv(ta, tr, rh, met, clo):
    """
    PMV ê³„ì‚°ì„ ìœ„í•œ í•¨ìˆ˜

    ë§¤ê°œë³€ìˆ˜:
    ta (float): ê³µê¸° ì˜¨ë„ (Â°C)
    tr (float): í‰ê·  ë°˜ëŒ€í¸ë©´ ì˜¨ë„ (Â°C)
    rh (float): ìƒëŒ€ ìŠµë„ (%)
    met (float): í™œë™ ëŒ€ì‚¬ìœ¨ (met)
    clo (float): ì˜·ì˜ ì €í•­ì„± (clo)

    ë°˜í™˜ê°’:
    pmv (float): ê³„ì‚°ëœ PMV ê°’
    """

    # ìƒìˆ˜ ì •ì˜
    pa = rh * 10 * math.exp(16.6536 - 4030.183 / (ta + 235))  # ìˆ˜ì¦ê¸° ì••ë ¥ (Pa)
    icl = 0.155 * clo  # í‘œë©´ ì˜·ì˜ í‘œë©´ì  ì§€ìˆ˜
    m = met * 58.15  # í™œë™ ëŒ€ì‚¬ìœ¨ (W/mÂ²)

    # PMV ê³„ì‚°
    pmv = (0.303 * math.exp(-0.036 * m) + 0.028) * (m - 3.05) \
        + (0.42 * math.exp(-0.04 * m) + 0.078) * (icl - 0.155) \
        + 3.96 * 10**-8 * icl * (34 - ta) \
        + 0.303 * math.exp(-0.036 * m) * (5.867 - 0.82 * (pa / icl)) \
        + 0.132 * icl * (tr - ta)

    return pmv
